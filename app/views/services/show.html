<div class="right-panel level-one" ng-class="{ active: servicePanelOpen, 'pushed-once': pushedOnce }" ng-model="loadedService" ch-after-transition>

	<!-- Close button -->
	<i class="fa fa-angle-double-right close-button" ng-click="closeServicePanel()"></i>

	<h1 class="name">{{ loadedService.name }}</h1>


	<!-- ================= MEMBERS CONTROLLER ================= -->


	<div ng-controller="MembersController">

		<div class="members-in-charge">

			<!-- Leader -->
			<span class="btn btn-default" ng-click="openMemberPanel(loadedService.leader_id)">
				Responsable : {{ loadedService.leader_name }}
			</span>

			<!-- In charge this office -->
			<span class="btn" ng-class="{ 'btn-primary': loadedService.member_in_charge_name, 'btn-danger': !loadedService.member_in_charge_name }" ng-click="toggleMemberList()">
				Cette réunion : {{ loadedService.member_in_charge_name || "Personne" }}
			</span>

		</div>

		<div class="member-list-container" ng-class="{ visible: memberListOpen }">

			<div class="list" ng-class="{ active: !memberToConfirm }">
				<p>Quelle personne sera en charge durant cette réunion ?</p>
				<span class="member btn btn-danger" ng-repeat="member in members" ng-click="confirmMemberInCharge(member)">{{ member.name }}</span>
			</div>

			<div class="confirmation" ng-class="{ active: memberToConfirm }">
				<p>
					Assigner {{ memberToConfirm.name }} au service {{ loadedService.name }} pour cette réunion ?<br>
					{{ memberToConfirm.name }} recevra un mail de confirmation.
				</p>
				<div class="btn btn-default" ng-click="confirmMemberInCharge(false)">Annuler</div>
				<div class="btn btn-primary" ng-click="updateMemberInCharge(memberToConfirm)">Confirmer</div>
			</div>

		</div>

		<!-- Member panel -->
		<div ng-include="'views/members/show.html'"></div>

	</div>


	<!-- ================= TASKS CONTROLLER ================= -->


	<div ng-controller="TasksController">

		<h2>Tâches à accomplir pour cette réunion</h2>

		<!-- Table of tasks -->
		<table class="tasks">

			<tr>
				<th>Tâche</th>
				<th>Échéance</th>
			</tr>

			<tr class="task" ng-repeat="task in tasks" ng-model="task">
				<td class="name">
					<input name="task_{{ task.id }}" id="task_{{ task.id }}" type="checkbox" ng-model="task.completed" ng-change="updateTask(task)">
					<label for="task_{{ task.id }}">{{ task.name }}</label>
				</td>
				<td class="due-date">{{ task.due_date | date:'d/MM/yyyy' }}</td>
			</tr>

		</table>

	</div>

	<!-- ================= END TASKS CONTROLLER ================= -->

</div>

<!-- Overlay -->
<div class="overlay" ng-class="{ 'visible-service': servicePanelOpen }" ng-click="closeAllPanels()"></div>