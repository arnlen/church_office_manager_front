<div class="right-panel level-one" ng-class="{ active: dvm.Service.panelOpen, 'edit-mode': dvm.Service.editMode, 'pushed': dvm.Service.panelPushed }">

	<div class="header-edit-mode">Modification du service</div>

	<!-- Panel buttons: close, edit, save -->
	<div class="buttons">
		<i class="fa fa-angle-double-right close-panel" ng-click="dvm.Service.closePanel()" ng-hide="dvm.Service.editMode"></i>
		<i class="fa fa-check valid-edit-panel" ng-click="dvm.Service.toggleEditMode()" ng-show="dvm.Service.editMode"></i>
		<i class="fa fa-edit edit-panel" ng-click="dvm.Service.toggleEditMode()" ng-hide="dvm.Service.editMode"></i>
	</div>

	<h1 class="name">{{ dvm.Service.loaded.name }}</h1>

	<!-- ================= EDIT SECTION ================= -->

	<div class="edit-section" ng-show="dvm.Service.editMode">

		<!-- Manage service's members -->
		<span class="btn btn-default" ng-click="editModeToggleMemberList()">
			Gérer les membres du service <i class="fa fa-angle-double-down"></i>
		</span>

		<div class="edit-member-list-container" ng-class="{ visible: editModeMemberListOpen }">
			<p>Ajouter / Retirer des membres de ce service</p>
			<span class="member" ng-class="{ 'member-of-this-service': isMemberOfThisService(member) }" ng-repeat="member in members" ng-click="toggleMembership(member)">{{ member.name }}</span>
		</div>

		<!-- Manage service's leader -->
		<span class="btn btn-default" ng-click="editModeToggleServiceMembersList()">
			Définir le responsable du service <i class="fa fa-angle-double-down"></i>
		</span>

		<div class="edit-service-members-list-container" ng-class="{ visible: editModeServiceMembersListOpen }">
			<p>Sélectionner le responsable du service</p>
			<span class="member" ng-class="{ 'leader-of-this-service': thisServiceHasThisLeader(member) }" ng-repeat="member in serviceMembers" ng-click="toggleServiceLeader(member)">{{ member.name }}</span>
		</div>

	</div>


	<!-- ================= MEMBERS SECTION ================= -->


	<div class="members-in-charge" ng-hide="dvm.Service.editMode">

		<!-- Leader -->
		<span class="btn btn-default" ng-click="dvm.Service.selectMember(dvm.Service.loaded.leader_id)">
			Responsable : {{ dvm.Service.loaded.leader_name }}
		</span>

		<!-- In charge this office -->
		<span class="btn" ng-class="{ 'btn-primary': dvm.Service.loaded.member_in_charge_name, 'btn-danger': !dvm.Service.loaded.member_in_charge_name }" ng-click="toggleMemberList()">
			Cette réunion : {{ dvm.Service.loaded.member_in_charge_name || "Personne" }}
		</span>

	</div>

	<div class="member-list-container" ng-class="{ visible: memberListOpen }">

		<div class="list" ng-class="{ active: !memberToConfirm }">
			<p>Quelle personne sera en charge durant cette réunion ?</p>
			<span class="member btn btn-danger" ng-repeat="member in serviceMembers" ng-click="confirmMemberInCharge(member)">{{ member.name }}</span>
		</div>

		<div class="confirmation" ng-class="{ active: memberToConfirm }">
			<p>
				Assigner {{ memberToConfirm.name }} au service {{ dvm.Service.loaded.name }} pour cette réunion ?<br>
				{{ memberToConfirm.name }} recevra un mail de confirmation.
			</p>
			<div class="btn btn-default" ng-click="confirmMemberInCharge(false)">Annuler</div>
			<div class="btn btn-primary" ng-click="updateMemberInCharge(memberToConfirm)">Confirmer</div>
		</div>

	</div>


	<!-- ================= TASKS CONTROLLER ================= -->


	<h2>Tâches à accomplir pour cette réunion</h2>

	<!-- Table of tasks -->
	<table class="tasks">

		<tr>
			<th>Tâche</th>
			<th>Échéance</th>
		</tr>

		<tr class="task" ng-repeat="task in dvm.Service.loaded.tasks" ng-model="task">
			<td class="name">
				<input name="task_{{ task.id }}" id="task_{{ task.id }}" type="checkbox" ng-model="task.completed" ng-change="update(task)">
				<label for="task_{{ task.id }}">{{ task.name }}</label>
			</td>
			<td class="due-date">{{ task.due_date | date:'d/MM/yyyy' }}</td>
		</tr>

	</table>


	<!-- ================= END TASKS CONTROLLER ================= -->

</div>